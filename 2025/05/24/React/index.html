<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Jasmine的小世界 | Jasmine的小世界</title><meta name="author" content="Jasmine"><meta name="copyright" content="Jasmine"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="React基础语法一、useState用于定义，修改数据 原理流程：trigger  -&gt; render（virtual dom） -&gt; commit 各流程介绍1.trigger:在useState的set函数即将被调用时的阶段，感觉到数据要发生变化了的瞬间，即为trigger 2.render function重新执行的过程，函数返回值是虚拟的dom，然后对旧的虚拟dom与新的虚拟">
<meta property="og:type" content="article">
<meta property="og:title" content="Jasmine的小世界">
<meta property="og:url" content="https://jasmine661.github.io/2025/05/24/React/index.html">
<meta property="og:site_name" content="Jasmine的小世界">
<meta property="og:description" content="React基础语法一、useState用于定义，修改数据 原理流程：trigger  -&gt; render（virtual dom） -&gt; commit 各流程介绍1.trigger:在useState的set函数即将被调用时的阶段，感觉到数据要发生变化了的瞬间，即为trigger 2.render function重新执行的过程，函数返回值是虚拟的dom，然后对旧的虚拟dom与新的虚拟">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://jasmine661.github.io/img/butterfly-icon.png">
<meta property="article:published_time" content="2025-05-24T05:25:53.935Z">
<meta property="article:modified_time" content="2025-05-24T05:25:20.088Z">
<meta property="article:author" content="Jasmine">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jasmine661.github.io/img/butterfly-icon.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "",
  "url": "https://jasmine661.github.io/2025/05/24/React/",
  "image": "https://jasmine661.github.io/img/butterfly-icon.png",
  "datePublished": "2025-05-24T05:25:53.935Z",
  "dateModified": "2025-05-24T05:25:20.088Z",
  "author": [
    {
      "@type": "Person",
      "name": "Jasmine",
      "url": "https://jasmine661.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://jasmine661.github.io/2025/05/24/React/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Jasmine的小世界',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Jasmine的小世界</span></a><a class="nav-page-title" href="/"><span class="site-name">Jasmine的小世界</span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">无标题</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-05-24T05:25:53.935Z" title="发表于 2025-05-24 13:25:53">2025-05-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-05-24T05:25:20.088Z" title="更新于 2025-05-24 13:25:20">2025-05-24</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="React基础语法"><a href="#React基础语法" class="headerlink" title="React基础语法"></a>React基础语法</h1><h3 id="一、useState"><a href="#一、useState" class="headerlink" title="一、useState"></a>一、<strong>useState</strong></h3><p>用于定义，修改数据</p>
<h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a><strong>原理</strong></h4><p>流程：trigger  -&gt; render（virtual dom） -&gt; commit</p>
<h5 id="各流程介绍"><a href="#各流程介绍" class="headerlink" title="各流程介绍"></a>各流程介绍</h5><h6 id="1-trigger"><a href="#1-trigger" class="headerlink" title="1.trigger:"></a><strong>1.trigger</strong>:</h6><p>在useState的set函数即将被调用时的阶段，感觉到数据要发生变化了的瞬间，即为trigger</p>
<h6 id="2-render"><a href="#2-render" class="headerlink" title="2.render"></a><strong>2.render</strong></h6><p> function重新执行的过程，函数返回值是虚拟的dom，然后对旧的虚拟dom与新的虚拟dom进行对比，发现不一样的地方</p>
<h6 id="3-virtual-dom"><a href="#3-virtual-dom" class="headerlink" title="3.virtual dom"></a><strong>3.virtual dom</strong></h6><p>真实dom的js对象表达，即虚拟dom，有着高性能</p>
<h6 id="4-commit："><a href="#4-commit：" class="headerlink" title="4.commit："></a><strong>4.commit</strong>：</h6><p>把虚拟dom上不同的地方反映到真实的dom上，对真实dom进行修改，页面更新</p>
<h4 id="数据状态"><a href="#数据状态" class="headerlink" title="数据状态"></a>数据状态</h4><p>useState定义的数据是<strong>快照态的数据</strong>，有<strong>batchUpdate</strong>的更新方式，即每次调用set函数时，如果是一个表达式，则会将原始设置的数据传过去，不会应为前面的set函数中调用的是函数而改变</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count,setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> <span class="title function_">handleCount</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setCount</span>(<span class="function">(<span class="params">count</span>) =&gt;</span> count + <span class="number">1</span>)</span><br><span class="line">        <span class="title function_">setCount</span>(count + <span class="number">1</span>)</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">clcik</span>=<span class="string">&#123;</span> <span class="attr">handleCount</span> &#125;&gt;</span> &#123; count &#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> </span><br><span class="line">&#125; <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>如果连续调用多个函数，则下次调用函数所传的参数即为上一个set函数调用函数的返回值。</p>
<p>useState定义的数据是组件独立的</p>
<p>react中的原生dom事件自带冒泡属性，可以在内部的事件中添加e.stopPropagation()阻住冒泡</p>
<h3 id="二、Immutable-编程规范"><a href="#二、Immutable-编程规范" class="headerlink" title="二、Immutable 编程规范"></a><strong>二、Immutable 编程规范</strong></h3><p>useState定义的数据是一个immutable的数据类型，是不可以直接更改的</p>
<h4 id="use-Immer插件"><a href="#use-Immer插件" class="headerlink" title="use-Immer插件"></a><strong>use-Immer插件</strong></h4><p>安装后可用useImmer来定义数据（适用于复杂数据类型），其定义的数据一定是immutable的数据类型，如果直接修改，控制台会直接报错，并且还能规避许多无用的渲染</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// react官方鼓励用以下方式修改数据</span></span><br><span class="line"><span class="keyword">const</span> [data,setData] = <span class="title function_">useImmer</span>(&#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(<span class="function">(<span class="params">draft</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// draft相当于将data的数据复制一份出来，形式类似与直接修改数据，但是immer底层做了分装，会帮助构建一个新对象去替换原始的数据</span></span><br><span class="line">        <span class="comment">// 这种写法可以有效规避immutable规范的一些错误，且写法更简单</span></span><br><span class="line">        draft.<span class="property">count</span> = draft.<span class="property">count</span> + <span class="number">1</span></span><br><span class="line">    &#125;) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="三、声明式编程及其开发规范"><a href="#三、声明式编程及其开发规范" class="headerlink" title="三、声明式编程及其开发规范"></a><strong>三、声明式编程及其开发规范</strong></h3><p>1.不要定义冗余的数据</p>
<p>2.将相关数据聚合在一起，相关数据放在一个对象中</p>
<p>3.数据结构不深，如定义对象时嵌套对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [user,setUser] = <span class="title function_">useImmer</span>(&#123;</span><br><span class="line">        <span class="attr">firstName</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">lastName</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleFirstName</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setUser</span>(<span class="function">(<span class="params">draft</span>) =&gt;</span> &#123;</span><br><span class="line">            draft.<span class="property">firstName</span> = e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleLastName</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setUser</span>(<span class="function">(<span class="params">draft</span>) =&gt;</span> &#123;</span><br><span class="line">            draft.<span class="property">lastName</span> = e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;  </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>FirstName:<span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;handleFirstName&#125;/</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    	<span class="tag">&lt;<span class="name">div</span>&gt;</span>LastName:<span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;handleLastName&#125;/</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    	<span class="tag">&lt;<span class="name">div</span>&gt;</span>FullName: &#123;user.firstName + &#x27; &#x27; + user.lastName&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="四、组件通信"><a href="#四、组件通信" class="headerlink" title="四、组件通信"></a><strong>四、组件通信</strong></h3><p>子组件之间通信 -&gt; 以父组件为桥梁</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">PartOne</span>, <span class="title class_">PartTwo</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;./Parts&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [showPartOne,setShowPartOne] = <span class="title function_">useState</span>(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">PartOne</span> <span class="attr">showPartOne</span>=<span class="string">&#123;showPartOne&#125;</span> <span class="attr">setShowPartOne</span>=<span class="string">&#123;setShowPartOne&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">PartTwo</span> <span class="attr">showPartOne</span>=<span class="string">&#123;showPartOne&#125;</span> <span class="attr">setShowPartOne</span>=<span class="string">&#123;setShowPartOne&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// parts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">PartOne</span>(<span class="params">&#123;showPartOne,setShowPartOne&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    	&#123; showPartOne ? <span class="tag">&lt;<span class="name">div</span>&gt;</span>PartOne<span class="tag">&lt;/<span class="name">div</span>&gt;</span> : null &#125;</span></span><br><span class="line"><span class="language-xml">    	<span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setShowPartOne(true)&#125;&gt;Toggle<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">PartTwo</span>(<span class="params">&#123;showPartOne,setShowPartOne&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    	&#123; !showPartOne ? <span class="tag">&lt;<span class="name">div</span>&gt;</span>PartTwo<span class="tag">&lt;/<span class="name">div</span>&gt;</span> : null &#125;</span></span><br><span class="line"><span class="language-xml">    	<span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setShowPartOne(false)&#125;&gt;Toggle<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="五、组件状态重置背后的运行机理"><a href="#五、组件状态重置背后的运行机理" class="headerlink" title="五、组件状态重置背后的运行机理"></a>五、<strong>组件状态重置背后的运行机理</strong></h3><p>1.UI节点位置上的内容发生改变时，原始组件会被销毁</p>
<p>2.组件在页面被销毁时，状态会清空</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 点击show按钮时，第二个Counter组件会被销毁，状态清空，因为ui位置内容变成了null</span></span><br><span class="line">    <span class="keyword">const</span> [show,setShow] = <span class="title function_">useState</span>(<span class="literal">true</span>)</span><br><span class="line">    <span class="comment">// 点击showColor按钮时，Counter的颜色会发生变化，但是不会被销毁，还是Counter组件</span></span><br><span class="line">    <span class="keyword">const</span> [showColor,setShowColor] = <span class="title function_">useState</span>(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Counter</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;show ? <span class="tag">&lt;<span class="name">Counter</span> /&gt;</span> : null&#125;</span></span><br><span class="line"><span class="language-xml">    	&#123;showColor ? <span class="tag">&lt;<span class="name">Counter</span> <span class="attr">showColor</span>=<span class="string">&#123;showColor&#125;</span> /&gt;</span> : <span class="tag">&lt;<span class="name">Counter</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;setShow(!show)&#125;&#125;&gt; show <span class="tag">&lt;/<span class="name">button</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;setShowColor(!showColor)&#125;&#125;&gt; showColor <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line"><span class="comment">// Counter    </span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params">&#123;showColor&#125;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> [count,setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">div</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        	   <span class="attr">style</span>=<span class="string">&#123;&#123;color:</span> <span class="attr">showColor</span> ? &#x27;<span class="attr">red</span>&#x27; <span class="attr">:</span> &#x27;<span class="attr">black</span>&#x27; &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">			  <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;setCount(count + 1)&#125;&#125;</span></span><br><span class="line"><span class="language-xml">            &gt;</span></span><br><span class="line"><span class="language-xml">                &#123;count&#125;</span></span><br><span class="line"><span class="language-xml">		  <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="六、Key值的作用详解"><a href="#六、Key值的作用详解" class="headerlink" title="六、Key值的作用详解"></a><strong>六、Key值的作用详解</strong></h3><ol>
<li><p>当存在key值时，不管ui节点所在位置内容是否改变，只要key发生了变化，原始组件就会被销毁</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App</span></span><br><span class="line"><span class="comment">// 当点击Click按钮时，两个Email组件的imput的内容都会被清空</span></span><br><span class="line"><span class="comment">// 第一个Email由于渲染结构变化（从直接渲染变为包裹在 div 中），第二个Email由于 key=&#123;to&#125; 变化，故React会销毁并重建它们</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Email</span> <span class="keyword">from</span> <span class="string">&#x27;./Eamil&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;useState&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [to,setTo] = <span class="title function_">useState</span>(<span class="string">&#x27;dell&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        	&#123;to === &#x27;dell&#x27; ? <span class="tag">&lt;<span class="name">Email</span> <span class="attr">to</span>=<span class="string">&#123;to&#125;/</span>&gt;</span> : <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">Email</span> <span class="attr">to</span>=<span class="string">&#123;to&#125;</span>&lt;/<span class="attr">div</span>&gt;</span>/&gt;&#125;</span></span><br><span class="line"><span class="language-xml">        	<span class="tag">&lt;<span class="name">Email</span> <span class="attr">to</span>=<span class="string">&#123;to&#125;</span> <span class="attr">key</span>=<span class="string">&#123;to&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;setTo(&#x27;lee&#x27;)&#125;&#125;&gt;Click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Eamil</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Email</span>(<span class="params">&#123;to&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        	To: <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;to&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    		content：<span class="tag">&lt;<span class="name">input</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>列表中key值的作用是提升列表渲染效率</p>
</li>
</ol>
<h3 id="七、Reducer"><a href="#七、Reducer" class="headerlink" title="七、Reducer"></a>七、Reducer</h3><p>可以将对数据进行加工处理的代码拆分到别的地方进行处理</p>
<h5 id="1-使用流程"><a href="#1-使用流程" class="headerlink" title="1.使用流程"></a>1.使用流程</h5><ul>
<li>定义数据</li>
<li>定义reducer函数</li>
<li>定义action，发送改变数据的指令</li>
<li>用dispatch方法派发action</li>
<li>Reducer 中 根据指令修改数据</li>
<li>完成数据的修改，return 新数据</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useReducer &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">listReducer</span> = (<span class="params">state,action</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span>(action.<span class="property">type</span> === <span class="string">&#x27;add&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> newList = [...state, &#123;</span><br><span class="line">            <span class="attr">id</span>: action.<span class="property">value</span>,</span><br><span class="line">            <span class="attr">value</span>: action.<span class="property">value</span></span><br><span class="line">        &#125;]</span><br><span class="line">        <span class="keyword">return</span> newList</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(action.<span class="property">type</span> === <span class="string">&#x27;delete&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> newList = state.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span> !== action.<span class="property">value</span>)</span><br><span class="line">        <span class="keyword">return</span> newList</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [inputValue,setInputValue] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> [list,dispatch] = <span class="title function_">useReducer</span>(listReducer,[])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleInputChange</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">        <span class="title function_">setInputValue</span>(e.<span class="property">target</span>.<span class="property">value</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleButtonClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> action = &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;add&#x27;</span>,</span><br><span class="line">            <span class="attr">value</span>: inputValue</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">dispatch</span>(action)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleItemClick</span> = (<span class="params">id</span>) =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> action = &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">            <span class="attr">value</span>: id</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">dispatch</span>(action)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        		<span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;inputValue&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;</span> <span class="attr">handleInputChange</span> &#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">        		<span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> <span class="attr">handleButtonClick</span> &#125;&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    		<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                 &#123; list.map((item,index) =&gt; <span class="tag">&lt;<span class="name">li</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                  		<span class="attr">key</span>=<span class="string">&#123;</span> <span class="attr">item.id</span> &#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    				   <span class="attr">onClick</span>=<span class="string">&#123;</span> () =&gt;</span> &#123; handleItemClick(item.id) &#125; &#125;</span></span><br><span class="line"><span class="language-xml">    				&gt;</span></span><br><span class="line"><span class="language-xml">                    	&#123;item.value&#125;</span></span><br><span class="line"><span class="language-xml">                      <span class="tag">&lt;/<span class="name">li</span>&gt;</span>) &#125; </span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-聚合数据处理逻辑"><a href="#2-聚合数据处理逻辑" class="headerlink" title="2.聚合数据处理逻辑"></a>2.聚合数据处理逻辑</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, dispatch] = <span class="title function_">useImmerReducer</span>(dataReducer, &#123;</span><br><span class="line">    <span class="attr">inputValue</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">list</span>: []</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleInputChange</span>(<span class="params">e</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> action = &#123; <span class="attr">type</span>: <span class="string">&#x27;changeInput&#x27;</span>, <span class="attr">value</span>: e.<span class="property">target</span>.<span class="property">value</span> &#125;;</span><br><span class="line">    <span class="title function_">dispatch</span>(action);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleButtonClick</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> action = &#123; <span class="attr">type</span>: <span class="string">&#x27;addItem&#x27;</span> &#125;</span><br><span class="line">    <span class="title function_">dispatch</span>(action);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleItemClick</span>(<span class="params">index</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> action = &#123; <span class="attr">type</span>: <span class="string">&#x27;deleteItem&#x27;</span>, <span class="attr">value</span>: index &#125;</span><br><span class="line">    <span class="title function_">dispatch</span>(action);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;data.inputValue&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;handleInputChange&#125;/</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleButtonClick&#125;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;</span></span><br><span class="line"><span class="language-xml">          data.list.map((item, index) =&gt; (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> handleItemClick(index)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">              &#123;item.value&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          ))</span></span><br><span class="line"><span class="language-xml">        &#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Reducer</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dataReducer</span>(<span class="params">draft, action</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span>(action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;changeInput&#x27;</span>:</span><br><span class="line">      draft.<span class="property">inputValue</span> = action.<span class="property">value</span>;</span><br><span class="line">      <span class="keyword">return</span> draft;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;addItem&#x27;</span>:</span><br><span class="line">      draft.<span class="property">list</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">id</span>: draft.<span class="property">inputValue</span>,</span><br><span class="line">        <span class="attr">value</span>: draft.<span class="property">inputValue</span></span><br><span class="line">      &#125;);</span><br><span class="line">      draft.<span class="property">inputValue</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      <span class="keyword">return</span> draft;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;deleteItem&#x27;</span>:</span><br><span class="line">      draft.<span class="property">list</span>.<span class="title function_">splice</span>(action.<span class="property">value</span>, <span class="number">1</span>);</span><br><span class="line">      <span class="keyword">return</span> draft;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> draft;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> dataReducer;</span><br></pre></td></tr></table></figure>

<h5 id="3-优缺点解析"><a href="#3-优缺点解析" class="headerlink" title="3.优缺点解析"></a>3.优缺点解析</h5><ul>
<li>业务逻辑代码量显著降低</li>
<li>代码的可读性比较高</li>
<li>前端自动化测试方便 Jest</li>
<li>组件的复用性会有一定的降低</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://jasmine661.github.io">Jasmine</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://jasmine661.github.io/2025/05/24/React/">https://jasmine661.github.io/2025/05/24/React/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://jasmine661.github.io" target="_blank">Jasmine的小世界</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/butterfly-icon.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/05/24/hello-world/" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Hello World</div></div><div class="info-2"><div class="info-item-1">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;  More info: Writing Run server1$ hexo server  More info: Server Generate static files1$ hexo generate  More info: Generating Deploy to remote sites1$ hexo deploy  More info: Deployment </div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Jasmine</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#React%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="toc-number">1.</span> <span class="toc-text">React基础语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81useState"><span class="toc-number">1.0.1.</span> <span class="toc-text">一、useState</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-number">1.0.1.1.</span> <span class="toc-text">原理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%84%E6%B5%81%E7%A8%8B%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.0.1.1.1.</span> <span class="toc-text">各流程介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-trigger"><span class="toc-number">1.0.1.1.1.1.</span> <span class="toc-text">1.trigger:</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-render"><span class="toc-number">1.0.1.1.1.2.</span> <span class="toc-text">2.render</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-virtual-dom"><span class="toc-number">1.0.1.1.1.3.</span> <span class="toc-text">3.virtual dom</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-commit%EF%BC%9A"><span class="toc-number">1.0.1.1.1.4.</span> <span class="toc-text">4.commit：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%8A%B6%E6%80%81"><span class="toc-number">1.0.1.2.</span> <span class="toc-text">数据状态</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Immutable-%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83"><span class="toc-number">1.0.2.</span> <span class="toc-text">二、Immutable 编程规范</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#use-Immer%E6%8F%92%E4%BB%B6"><span class="toc-number">1.0.2.1.</span> <span class="toc-text">use-Immer插件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%A3%B0%E6%98%8E%E5%BC%8F%E7%BC%96%E7%A8%8B%E5%8F%8A%E5%85%B6%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83"><span class="toc-number">1.0.3.</span> <span class="toc-text">三、声明式编程及其开发规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-number">1.0.4.</span> <span class="toc-text">四、组件通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E7%BB%84%E4%BB%B6%E7%8A%B6%E6%80%81%E9%87%8D%E7%BD%AE%E8%83%8C%E5%90%8E%E7%9A%84%E8%BF%90%E8%A1%8C%E6%9C%BA%E7%90%86"><span class="toc-number">1.0.5.</span> <span class="toc-text">五、组件状态重置背后的运行机理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E3%80%81Key%E5%80%BC%E7%9A%84%E4%BD%9C%E7%94%A8%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.0.6.</span> <span class="toc-text">六、Key值的作用详解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83%E3%80%81Reducer"><span class="toc-number">1.0.7.</span> <span class="toc-text">七、Reducer</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B"><span class="toc-number">1.0.7.0.1.</span> <span class="toc-text">1.使用流程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E8%81%9A%E5%90%88%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E9%80%BB%E8%BE%91"><span class="toc-number">1.0.7.0.2.</span> <span class="toc-text">2.聚合数据处理逻辑</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E4%BC%98%E7%BC%BA%E7%82%B9%E8%A7%A3%E6%9E%90"><span class="toc-number">1.0.7.0.3.</span> <span class="toc-text">3.优缺点解析</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/24/React/" title="无标题">无标题</a><time datetime="2025-05-24T05:25:53.935Z" title="发表于 2025-05-24 13:25:53">2025-05-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/24/hello-world/" title="Hello World">Hello World</a><time datetime="2025-05-24T01:58:22.095Z" title="发表于 2025-05-24 09:58:22">2025-05-24</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By Jasmine</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>